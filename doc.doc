Prompt de Requerimientos - Sistema Experto de Recomendaci√≥n de Viajes
üìã Descripci√≥n General del Proyecto
Desarrollar un Sistema Experto de Recomendaci√≥n de Viajes que personalice experiencias tur√≠sticas mediante un cuestionario inteligente que identifica el destino ideal del usuario y sugiere opciones de hospedaje. La soluci√≥n se implementar√° completamente en n8n (plataforma de automatizaci√≥n de workflows) integrando APIs externas para obtener informaci√≥n de destinos, im√°genes y hoteles.

üéØ Objetivos del Sistema

Capturar preferencias del usuario mediante un cuestionario interactivo
Procesar respuestas con l√≥gica de sistema experto para determinar destino √≥ptimo
Recomendar destinos personalizados con informaci√≥n completa (descripci√≥n, im√°genes, clima, actividades)
Sugerir hoteles en el destino seleccionado con opciones de diferentes rangos de precio
Integraci√≥n completa con APIs para datos actualizados y reales
Implementaci√≥n 100% en n8n con workflow exportable


üìä Requerimientos Funcionales
1. M√≥dulo de Cuestionario Inteligente
El sistema debe realizar preguntas para determinar:

Tipo de viaje: Aventura, Relajaci√≥n, Cultural, Rom√°ntico, Familiar, Gastron√≥mico, Ecoturismo
Presupuesto: Econ√≥mico, Moderado, Confort, Lujo
Clima preferido: Playa/Calor, Monta√±a/Fr√≠o, Templado, No importa
Duraci√≥n del viaje: Fin de semana (2-3 d√≠as), Semanal (4-7 d√≠as), Extendido (8+ d√≠as)
Tipo de actividades: Deportes extremos, Museos/Historia, Naturaleza, Vida nocturna, Gastronom√≠a, Shopping
Estilo de hospedaje: Hotel, Resort, Hostal, Airbnb, Boutique
Compa√±√≠a: Solo, Pareja, Familia con ni√±os, Amigos, Grupo
√âpoca del a√±o: Fechas espec√≠ficas o flexibles

2. Motor de Recomendaci√≥n (Sistema Experto)
Debe implementar l√≥gica de reglas que:

Asigne pesos a cada respuesta del cuestionario
Calcule scores de compatibilidad para diferentes destinos
Priorice destinos seg√∫n m√∫ltiples criterios combinados
Maneje empates con criterios de desempate
Permita configuraci√≥n de reglas mediante variables en n8n

3. M√≥dulo de Informaci√≥n de Destinos
Debe proporcionar:

Nombre y ubicaci√≥n del destino
Descripci√≥n detallada (atractivos tur√≠sticos, cultura, gastronom√≠a)
Galer√≠a de im√°genes (m√≠nimo 5 im√°genes de alta calidad)
Clima actual y pron√≥stico
Principales actividades y atracciones
Consejos de viaje (mejor √©poca, requisitos, seguridad)
Rango de costos estimados

4. M√≥dulo de Recomendaci√≥n de Hoteles
Debe mostrar:

Lista de 5-10 hoteles en el destino
Informaci√≥n de cada hotel:

Nombre y categor√≠a (estrellas)
Direcci√≥n y ubicaci√≥n en mapa
Precio por noche (en m√∫ltiples monedas)
Im√°genes del hotel (exterior, habitaciones, amenidades)
Servicios y amenidades
Calificaci√≥n de hu√©spedes
Link de reservaci√≥n


Filtros: Por precio, categor√≠a, servicios, ubicaci√≥n
Ordenamiento: Por precio, calificaci√≥n, distancia al centro

5. Interfaz de Usuario (Frontend)

Landing page con bienvenida y bot√≥n "Comenzar"
Formulario de preguntas con navegaci√≥n paso a paso
Barra de progreso del cuestionario
P√°gina de resultados con:

Destino recomendado principal
2-3 destinos alternativos
Carrusel de im√°genes
Informaci√≥n detallada expandible
Secci√≥n de hoteles con cards responsive


Dise√±o responsive (m√≥vil, tablet, desktop)
Opci√≥n de reiniciar b√∫squeda o ajustar preferencias


üîß Requerimientos T√©cnicos
Plataforma Base

n8n (self-hosted o cloud): Versi√≥n 1.0 o superior
Workflow completo documentado y exportable en formato JSON

APIs Requeridas
1. API de Destinos y Lugares

Opciones recomendadas:

Amadeus Travel API (https://developers.amadeus.com/)
Geoapify (lugares y geocoding)
REST Countries API (informaci√≥n de pa√≠ses)
OpenTripMap API (atracciones tur√≠sticas)



2. API de Im√°genes

Opciones recomendadas:

Unsplash API (fotos de alta calidad)
Pexels API (banco gratuito de im√°genes)
Pixabay API (im√°genes libres de derechos)
Google Places Photos API



3. API de Hoteles

Opciones recomendadas:

Booking.com API (socios)
Amadeus Hotel Search API
Rakuten Rapid API - Hotels.com
Skyscanner Hotels API
Priceline Partner Network



4. API de Clima

OpenWeatherMap API o WeatherAPI.com

5. API de Mapas (opcional)

Mapbox o Google Maps API para visualizaci√≥n

Nodos de n8n a Utilizar

Webhook - Recibir datos del formulario web
HTTP Request - Llamadas a APIs externas
Function / Code - L√≥gica del sistema experto
IF / Switch - Decisiones condicionales
Set - Manipulaci√≥n de variables
Merge - Combinar datos de m√∫ltiples fuentes
Item Lists - Procesar listas de hoteles/destinos
HTML / Respond to Webhook - Devolver respuesta formateada
Spreadsheet (opcional) - Base de datos de destinos
JSON - Formateo de respuestas


üìÅ Estructura del Proyecto
sistema-viajes-n8n/
‚îÇ
‚îú‚îÄ‚îÄ workflows/
‚îÇ   ‚îú‚îÄ‚îÄ main-workflow.json          # Workflow principal exportado
‚îÇ   ‚îú‚îÄ‚îÄ sub-workflow-questionnaire.json (opcional)
‚îÇ   ‚îî‚îÄ‚îÄ sub-workflow-hotels.json (opcional)
‚îÇ
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ index.html                   # Landing page
‚îÇ   ‚îú‚îÄ‚îÄ questionnaire.html           # Formulario de preguntas
‚îÇ   ‚îú‚îÄ‚îÄ results.html                 # P√°gina de resultados
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ styles.css               # Estilos personalizados
‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îÇ       ‚îú‚îÄ‚îÄ questionnaire.js         # L√≥gica del formulario
‚îÇ       ‚îî‚îÄ‚îÄ results.js               # Renderizado de resultados
‚îÇ
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ expert-system-logic.js       # Algoritmo del sistema experto
‚îÇ   ‚îú‚îÄ‚îÄ api-handlers.js              # Funciones para llamadas API
‚îÇ   ‚îî‚îÄ‚îÄ data-processing.js           # Procesamiento de respuestas API
‚îÇ
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ api-keys.env                 # Variables de entorno (NO subir a Git)
‚îÇ   ‚îú‚îÄ‚îÄ destinations-rules.json      # Reglas de recomendaci√≥n
‚îÇ   ‚îî‚îÄ‚îÄ destinations-database.json   # Base de datos de destinos
‚îÇ
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ README.md                    # Documentaci√≥n del proyecto
‚îÇ   ‚îú‚îÄ‚îÄ INSTALLATION.md              # Gu√≠a de instalaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ API-DOCUMENTATION.md         # Documentaci√≥n de APIs
‚îÇ   ‚îî‚îÄ‚îÄ WORKFLOW-GUIDE.md            # Explicaci√≥n del flujo n8n
‚îÇ
‚îî‚îÄ‚îÄ assets/
    ‚îî‚îÄ‚îÄ images/                      # Im√°genes del proyecto (logos, icons)
```

---

## üîÑ Flujo de Trabajo en n8n

### **Workflow Principal**
```
[Webhook - Inicio]
    ‚Üì
[Validar Datos de Entrada]
    ‚Üì
[Function - Sistema Experto]
    ‚îú‚îÄ Procesar respuestas del cuestionario
    ‚îú‚îÄ Aplicar reglas de recomendaci√≥n
    ‚îú‚îÄ Calcular scores de destinos
    ‚îî‚îÄ Seleccionar top 3 destinos
    ‚Üì
[HTTP Request - API de Destinos] (paralelo)
    ‚îú‚îÄ Obtener informaci√≥n detallada
    ‚îî‚îÄ Geocodificaci√≥n
    ‚Üì
[HTTP Request - API de Im√°genes] (paralelo)
    ‚îú‚îÄ Buscar im√°genes por destino
    ‚îî‚îÄ Filtrar alta resoluci√≥n
    ‚Üì
[HTTP Request - API de Clima]
    ‚îî‚îÄ Obtener pron√≥stico actual
    ‚Üì
[HTTP Request - API de Hoteles]
    ‚îú‚îÄ Buscar hoteles en coordenadas
    ‚îú‚îÄ Filtrar por preferencias usuario
    ‚îî‚îÄ Ordenar por calificaci√≥n/precio
    ‚Üì
[Function - Formatear Respuesta]
    ‚îú‚îÄ Estructurar JSON de destinos
    ‚îú‚îÄ Organizar hoteles por categor√≠a
    ‚îî‚îÄ Preparar URLs de im√°genes
    ‚Üì
[Respond to Webhook]
    ‚îî‚îÄ Enviar JSON al frontend
Puntos Cr√≠ticos del Flujo

Manejo de errores: Implementar try-catch en cada llamada API
Fallbacks: Si una API falla, usar alternativa o datos en cach√©
Rate limiting: Controlar frecuencia de llamadas a APIs
Timeouts: Establecer l√≠mites de tiempo para cada request
Cach√©: Guardar temporalmente resultados frecuentes


üß† L√≥gica del Sistema Experto
Algoritmo de Recomendaci√≥n
javascript// Pseudoc√≥digo del motor de recomendaci√≥n

function calculateDestinationScore(userPreferences, destination) {
  let score = 0;
  
  // Peso por tipo de viaje (30%)
  if (userPreferences.tripType === destination.primaryType) {
    score += 30;
  } else if (destination.secondaryTypes.includes(userPreferences.tripType)) {
    score += 15;
  }
  
  // Peso por presupuesto (25%)
  if (userPreferences.budget === destination.priceRange) {
    score += 25;
  } else if (Math.abs(budgetDiff) === 1) {
    score += 12;
  }
  
  // Peso por clima (20%)
  if (userPreferences.climate === destination.climate) {
    score += 20;
  }
  
  // Peso por actividades (15%)
  const activityMatches = intersection(
    userPreferences.activities,
    destination.availableActivities
  );
  score += (activityMatches.length / userPreferences.activities.length) * 15;
  
  // Peso por compa√±√≠a (10%)
  if (destination.recommendedFor.includes(userPreferences.company)) {
    score += 10;
  }
  
  return score;
}

// Seleccionar top destinos
destinations.sort((a, b) => b.score - a.score);
return destinations.slice(0, 3);

üé® Dise√±o de Interfaz
Paleta de Colores Sugerida

Primario: #2563EB (Azul vibrante - viajes)
Secundario: #F59E0B (Naranja c√°lido - aventura)
Acento: #10B981 (Verde - naturaleza)
Neutral: #F3F4F6 (Gris claro - fondos)
Texto: #1F2937 (Gris oscuro)

Tipograf√≠a

Encabezados: Poppins (Google Fonts)
Cuerpo: Inter (Google Fonts)

Componentes UI

Cards con hover effects para hoteles
Carrusel de im√°genes con thumbnails
Stepper animado para cuestionario
Loading spinner durante b√∫squeda
Toasts para notificaciones


üìù Scripts Espec√≠ficos Requeridos
1. Script de Sistema Experto (JavaScript para n8n)
javascript// Para Function node en n8n
const userAnswers = $input.item.json;

// Base de datos de destinos (simplificada)
const destinations = [
  {
    id: 1,
    name: "Cusco, Per√∫",
    primaryType: "cultural",
    secondaryTypes: ["adventure", "nature"],
    climate: "temperate",
    priceRange: "moderate",
    availableActivities: ["history", "trekking", "gastronomy"],
    recommendedFor: ["couple", "friends", "solo"],
    coordinates: { lat: -13.5319, lon: -71.9675 }
  },
  // ... m√°s destinos
];

// Calcular scores
const scoredDestinations = destinations.map(dest => {
  let score = 0;
  
  // L√≥gica de scoring (ver pseudoc√≥digo arriba)
  // ...
  
  return { ...dest, score };
});

// Ordenar y retornar top 3
scoredDestinations.sort((a, b) => b.score - a.score);
return scoredDestinations.slice(0, 3).map(dest => ({ json: dest }));
2. Script de Llamada a API de Hoteles
javascript// HTTP Request node configuration
const destination = $input.item.json;
const apiKey = $env.AMADEUS_API_KEY;

// Configuraci√≥n del request
return {
  method: 'GET',
  url: 'https://test.api.amadeus.com/v3/shopping/hotel-offers',
  qs: {
    latitude: destination.coordinates.lat,
    longitude: destination.coordinates.lon,
    radius: 10,
    radiusUnit: 'KM',
    ratings: '3,4,5',
    hotelSource: 'ALL'
  },
  headers: {
    'Authorization': `Bearer ${apiKey}`
  }
};
3. Script de Procesamiento de Im√°genes
javascript// Para Function node que procesa respuesta de Unsplash
const photos = $input.item.json.results;

const processedImages = photos.slice(0, 5).map(photo => ({
  id: photo.id,
  url: photo.urls.regular,
  thumbnail: photo.urls.thumb,
  photographer: photo.user.name,
  alt: photo.alt_description
}));

return [{ json: { images: processedImages } }];

üîê Seguridad y Configuraci√≥n
Variables de Entorno en n8n
env# APIs Keys (configurar en n8n Credentials)
AMADEUS_API_KEY=your_key_here
AMADEUS_API_SECRET=your_secret_here
UNSPLASH_ACCESS_KEY=your_key_here
OPENWEATHER_API_KEY=your_key_here
BOOKING_API_KEY=your_key_here

# Configuraci√≥n
N8N_HOST=0.0.0.0
N8N_PORT=5678
N8N_PROTOCOL=https
WEBHOOK_URL=https://your-n8n-instance.com
Consideraciones de Seguridad

Validaci√≥n de inputs: Sanitizar datos del formulario
Rate limiting: Limitar peticiones por IP
API Key rotation: Cambiar claves peri√≥dicamente
HTTPS obligatorio: Para webhooks y frontend
CORS configurado: Permitir solo dominios autorizados


üì¶ Entregables del Proyecto
Documentaci√≥n

‚úÖ README.md con:

Descripci√≥n del proyecto
Instrucciones de instalaci√≥n
Gu√≠a de uso
Screenshots


‚úÖ WORKFLOW-GUIDE.md con:

Explicaci√≥n detallada de cada nodo
Diagramas de flujo
Capturas del workflow en n8n


‚úÖ API-DOCUMENTATION.md con:

Documentaci√≥n de APIs utilizadas
Endpoints espec√≠ficos
Ejemplos de respuestas
Manejo de errores



C√≥digo

‚úÖ main-workflow.json: Workflow exportado de n8n
‚úÖ Frontend completo: HTML, CSS, JS
‚úÖ Scripts documentados: Todos los Function nodes
‚úÖ destinations-database.json: BD de destinos inicial (m√≠nimo 20 destinos)
‚úÖ destinations-rules.json: Configuraci√≥n de reglas

Deployment

‚úÖ Gu√≠a de despliegue paso a paso
‚úÖ Docker Compose (opcional) para n8n
‚úÖ Variables de entorno template


üß™ Testing y Validaci√≥n
Casos de Prueba

Cuestionario completo: Usuario responde todas las preguntas
Cuestionario parcial: Usuario omite preguntas opcionales
M√∫ltiples destinos: Sistema retorna alternativas v√°lidas
Hoteles variados: Diferentes rangos de precio
APIs fallidas: Manejo de errores gracefully
Carga concurrente: M√∫ltiples usuarios simult√°neos
Responsive design: Pruebas en m√≥vil, tablet, desktop

M√©tricas de √âxito

‚úÖ Tiempo de respuesta < 5 segundos
‚úÖ 95% uptime de APIs
‚úÖ 100% de cuestionarios generan recomendaci√≥n
‚úÖ M√≠nimo 5 im√°genes por destino
‚úÖ M√≠nimo 5 hoteles por destino


üöÄ Fases de Implementaci√≥n
Fase 1: Setup y Configuraci√≥n (Semana 1)

Instalar n8n
Registrarse en todas las APIs
Crear estructura de proyecto
Configurar variables de entorno

Fase 2: Sistema Experto (Semana 2)

Crear base de datos de destinos
Implementar algoritmo de recomendaci√≥n
Dise√±ar l√≥gica de reglas
Testing de motor de recomendaci√≥n

Fase 3: Integraci√≥n de APIs (Semana 3)

Conectar API de destinos
Integrar API de im√°genes
Configurar API de hoteles
Implementar API de clima
Manejo de errores y fallbacks

Fase 4: Workflow n8n (Semana 4)

Construir workflow principal
Configurar webhooks
Conectar todos los nodos
Optimizar flujo de datos
Testing end-to-end

Fase 5: Frontend (Semana 5)

Dise√±ar interfaces
Implementar formulario reactivo
Crear p√°gina de resultados
Integraci√≥n con n8n webhook
Responsive design

Fase 6: Testing y Deployment (Semana 6)

Pruebas de integraci√≥n
Pruebas de carga
Correcci√≥n de bugs
Documentaci√≥n final
Despliegue a producci√≥n


üìö Recursos y Referencias
Documentaci√≥n Oficial

n8n Docs: https://docs.n8n.io/
Amadeus API: https://developers.amadeus.com/
Unsplash API: https://unsplash.com/developers
OpenWeatherMap: https://openweathermap.org/api
Booking.com Partner: https://www.booking.com/affiliate-program/