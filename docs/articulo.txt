UNIVERSIDAD NACIONAL DE TRUJILLO

FACULTAD DE INGENIERÍA
ESCUELA PROFESIONAL DE INGENIERÍA DE SISTEMAS

“Sistema de Planificación de Viajes con Agente de IA con Google Gemini 2.5 flash en n8n - TravelSmart”

AUTORES	:
Guimaray Matute Leonardo Javier
Villacorta Carranza Ronald David
Fernandez Esquerre Iván

ASESOR	:
Ms. Santos Fernández, Juan Pedro 

LÍNEA DE INVESTIGACIÓN	:
Ingeniería de Software II

TRUJILLO–PERÚ
2025


Sistema de Planificación de Viajes con Agente de IA con Google Gemini 2.5 flash en n8n - TravelSmart

Resumen
El presente trabajo de investigación aborda la problemática de la sobrecarga informativa y la complejidad en la planificación de viajes turísticos. Se desarrolló "TravelSmart", un sistema experto de recomendación basado en agentes de Inteligencia Artificial utilizando el modelo Google Gemini 2.5 Flash orquestado en n8n. El objetivo principal fue optimizar la eficiencia y la experiencia del usuario en la creación de itinerarios personalizados. La metodología empleada fue experimental, comparando el desempeño del sistema frente al proceso manual tradicional. Los resultados demostraron una reducción significativa en los tiempos de planificación, un alto nivel de satisfacción del usuario validado mediante cuestionarios estandarizados, y una elevada tasa de eficacia en la generación de itinerarios factibles. Se concluye que la integración de modelos de lenguaje grandes (LLMs) con flujos de trabajo automatizados mejora sustancialmente la operatividad y usabilidad en el sector e-tourism.

Palabras Clave: Inteligencia Artificial, Planificación de Viajes, Sistemas de Recomendación, n8n, Google Gemini, Turismo Inteligente.

Abstract
This research addresses the issue of information overload and complexity in tourist trip planning. "TravelSmart", an expert recommendation system based on Artificial Intelligence agents using the Google Gemini 2.5 Flash model orchestrated in n8n, was developed. The main objective was to optimize efficiency and user experience in creating personalized itineraries. The methodology used was experimental, comparing the system's performance against the traditional manual process. The results demonstrated a significant reduction in planning times, a high level of user satisfaction validated through standardized questionnaires, and a high rate of effectiveness in generating feasible itineraries. It is concluded that the integration of Large Language Models (LLMs) with automated workflows substantially improves operability and usability in the e-tourism sector.

Keywords: Artificial Intelligence, Trip Planning, Recommender Systems, n8n, Google Gemini, Smart Tourism.

1. Introducción
La planificación de viajes se ha transformado radicalmente con la digitalización del turismo: la intermediación electrónica, la expansión de la web social y la ubicuidad móvil han alterado los flujos de información y la toma de decisiones del viajero, generando nuevas oportunidades pero también una marcada sobrecarga informativa (Buhalis & Law, 2008; Werthner & Ricci, 2004; Xiang & Gretzel, 2010). En este ecosistema, la búsqueda, filtrado y curaduría de información turística devienen procesos complejos, donde preferencias, restricciones de tiempo y presupuesto, y señales contextuales deben integrarse en tiempo casi real (Xiang & Fesenmaier, 2020; Xiang, Magnini, & Fesenmaier, 2015).
Para enfrentar este reto, los sistemas de recomendación en los viajes y turismo han evolucionado desde enfoques basados en contenido y filtrado colaborativo hacia arquitecturas híbridas y context-aware que modelan afinidades, estacionalidad y movilidad, elevando la pertinencia de sugerencias de destinos, actividades y POIs (Borràs, Moreno, & Valls, 2014; Chaudhari & Thakkar, 2019; Ricci, 2022). La incorporación explícita del contexto (lugar, tiempo disponible, intención de viaje, modo de transporte) mejora sensiblemente la utilidad percibida por el usuario (Zanker & Ricci, 2014), y la explotación de datos generados por los propios viajeros (por ejemplo, fotos georreferenciadas y trayectorias) habilita recomendaciones más finas y situadas (Yin et al., 2015).
Cuando la pregunta pasa de “¿qué ver?” a “¿cómo secuenciar lo que quiero ver en el tiempo y en la ruta?”, el núcleo técnico se desplaza hacia la optimización bajo restricciones: el Tourist Trip Design Problem (TTDP) y variantes del problema de orienteering con ventanas temporales y beneficios asignados a POIs capturan la estructura combinatoria del armado de itinerarios (especialmente en road trips) y requieren heurísticas/metaheurísticas para obtener soluciones factibles y valiosas en plazos razonables (Cerna, Hernández-Peñaloza, Gaudiano, & Vargas, 2022; Gavalas, Konstantopoulos, Mastakas, & Pantziou, 2014; Vansteenwegen, Souffriau, & Van Oudheusden, 2011). En paralelo, se han propuesto métodos data-driven que inducen rutas probables a partir de datos de comportamiento (fotos, check-ins) y luego personalizan la secuenciación (Kurashima, Iwata, Irie, & Fujimura, 2013; Yin et al., 2015), así como aplicaciones específicas para ciclismo y turismo regional que ponen de manifiesto la necesidad de verificar horarios, distancias y tiempos de traslado realistas (Souffriau, Vansteenwegen, Vanden Berghe, & Van Oudheusden, 2011).
La capa de interacción conversacional ha cobrado protagonismo: chatbots y asistentes inteligentes permiten solicitar preferencias en lenguaje natural, explicar alternativas y replanificar sobre la marcha, cubriendo momentos de inspiración, planificación y apoyo in-trip (Calvaresi et al., 2021). Sin embargo, persisten desafíos de confiabilidad (explicabilidad, robustez, privacidad y seguridad) que la literatura reciente en recomendación “fiable” subraya como criterios indispensables cuando las decisiones algorítmicas afectan itinerarios, costos y experiencias de usuarios reales (Zhang, Yao, Sun, & Tay, 2022).
En este contexto, presentamos TravelSmart, un sistema experto de recomendación de viajes implementado de extremo a extremo. El motor de reglas y la orquestación se realizan en n8n, donde se validan datos en tiempo real desde fuentes externas (OpenTripMap para lugares y geocodificación, Pexels/Pixabay para imágenes, OpenWeather para clima y Amadeus para hoteles). El frontend en Next.js ofrece un cuestionario multi‑paso y una página de resultados con explicaciones, alternativas y tarjetas de hoteles. Nuestra contribución se centra en la trazabilidad y factibilidad de las recomendaciones: cada destino incluye justificaciones basadas en preferencias, presupuesto, clima y disponibilidad, y el sistema aplica fallbacks y manejo de errores para garantizar respuestas operables. Este enfoque supera las limitaciones de soluciones puramente generativas al producir recomendaciones personalizadas y ejecutables que equilibran satisfacción del usuario, diversidad de actividades y restricciones reales de viaje (Cerna et al., 2022).

1.1 Objetivos
Objetivo general
Desarrollar y evaluar un Sistema de Planificación de Viajes asistido por Agente de IA (TravelSmart) para optimizar la eficiencia operativa en la generación de itinerarios, mejorar la satisfacción del usuario y asegurar la eficacia en la finalización de tareas de planificación.

Objetivos específicos
1. Determinar la reducción del tiempo en el proceso de planificación de itinerarios y selección de servicios turísticos mediante la automatización con n8n y Google Gemini 2.5 Flash en comparación con el método manual tradicional.
2. Evaluar el nivel de satisfacción y la usabilidad del sistema percibida por los usuarios finales, midiendo dimensiones de claridad, eficiencia y confianza mediante instrumentos estandarizados.
3. Analizar la eficacia del sistema midiendo la Tasa de Finalización de Tareas (Task Completion Rate) en la generación exitosa de itinerarios completos y factibles.

2. Materiales y métodos
Plataforma de Interacción y Resultados (Frontend)
Se utilizó Next.js (v.15, framework de React) como la plataforma principal de interacción con el usuario. Esta aplicación web cumple dos funciones: presenta el cuestionario multi-paso para recolectar las preferencias del usuario (destino, presupuesto, gustos) y actúa como la "plataforma de resultados", renderizando el itinerario final con las recomendaciones, mapas y explicaciones generadas por el backend.

Arquitectura de Backend
La lógica principal se implementó en NestJS (v.11.1.827, framework de Node.js), que maneja el saneamiento de datos para el registro en PostgreSQL y expone los endpoints HTTP para la comunicación con el frontend. Actúa como un gateway de dominio que normaliza entradas, aplica validaciones (esquemas JSON), firma solicitudes hacia n8n, expone endpoints REST para lectura/escritura de itinerarios y preferencias, y publica eventos para actualizaciones en la base de datos.
Se usaron DTOs (class-validator) para asegurar la integridad de los datos. En conjunto con NestJS, se usó n8n como plataforma de orquestación. n8n se encarga de recibir las solicitudes, ejecutar las llamadas a las APIs externas (OpenTripMap, OpenWeather, Amadeus, Pexels/Pixabay) y gestionar la consulta al modelo Google Gemini 2.5 Flash para la generación del itinerario.

Base de datos
Para la persistencia de los datos usamos PostgreSQL en su versión 18, lanzada el 25 de septiembre de 2025. Nuestro esquema relacional gestiona usuarios, preferencias, viajes, itinerarios, fuentes y logs. Índices por usuario_id, fecha, y destino_id aseguran consultas sub‑segundo. Se almacena la traza completa (inputs del usuario, tool calls, respuestas del modelo, validaciones) para auditabilidad.

Integración y flujo de datos
Se diseñó un flujo de datos principal en n8n (versión 1.120.1) para la generación de itinerarios:
1. Recepción de la solicitud (webhook) desde NestJS con el perfil del usuario.
2. Consulta a las APIs externas (OpenTripMap, OpenWeather) para obtener datos de POIs, clima y hoteles.
3. Consulta al modelo Gemini 2.5 Flash con el contexto completo para generar un borrador de itinerario en JSON.
4. Validación y optimización del itinerario (se verifican horarios, traslados y presupuesto).
5. Envío de la respuesta JSON final a NestJS para ser guardada en PostgreSQL y visualizada en el frontend.

Indicadores de Evaluación
Con el objetivo de asegurar la trazabilidad entre los objetivos de investigación y los resultados, se definió un conjunto de indicadores alineados con tres dimensiones clave: eficiencia temporal, satisfacción del usuario y eficacia técnica.

El mapeo de indicadores con objetivos específicos se detalla a continuación:

Objetivo Específico 1: Determinar la reducción del tiempo en el proceso de planificación.
- Indicador: Reducción del Tiempo de Planificación
- Definición: Mide la diferencia de tiempo entre la planificación manual de un viaje y la planificación asistida por el sistema TravelSmart.
- Fórmula: (Tiempo_Manual - Tiempo_Sistema) / Tiempo_Manual * 100
- Unidad de medida: Porcentaje (%)
- Instrumento: Cronómetro digital (función timer del sistema vs. cronómetro manual).
- Valor esperado: >= 80% de reducción del tiempo.

Objetivo Específico 2: Evaluar el nivel de satisfacción y usabilidad.
- Indicador: Nivel de Satisfacción del Usuario (Escala Likert)
- Definición: Evalúa la percepción del usuario sobre la claridad, eficiencia y confianza del sistema mediante un cuestionario post-uso.
- Fórmula: Promedio de las puntuaciones obtenidas en el cuestionario (Escala 1-5).
- Unidad de medida: Puntos (1 a 5)
- Instrumento: Cuestionario de Satisfacción y Usabilidad (9 reactivos en 3 dimensiones).
- Valor esperado: > 4.0 puntos (Nivel "De acuerdo" o superior).

Objetivo Específico 3: Analizar la eficacia del sistema.
- Indicador: Tasa de Finalización de Tareas (Task Completion Rate)
- Definición: Porcentaje de sesiones de planificación que resultan en un itinerario generado exitosamente y visualizado por el usuario.
- Fórmula: (Itinerarios Generados Exitosamente / Total de Intentos de Planificación) * 100
- Unidad de medida: Porcentaje (%)
- Instrumento: Logs de ejecución en n8n y registros en base de datos PostgreSQL.
- Valor esperado: > 90% de tasa de éxito.

Instrumentos de medición
Los instrumentos de medición empleados fueron:
- Cronómetro digital (Timer): Integrado en el código para medir con precisión de milisegundos el tiempo de procesamiento del sistema (desde el envío del formulario hasta la renderización de resultados). Para el proceso manual, se utilizó un cronómetro estándar.
- Cuestionarios Ad-Hoc (Escala Likert): Dos instrumentos diseñados específicamente para esta investigación:
  1. Cuestionario Pre-Uso: Evalúa las expectativas y la dificultad percibida del proceso manual actual.
  2. Cuestionario Post-Uso: Evalúa la satisfacción, usabilidad y confianza tras utilizar TravelSmart.
  Ambos constan de 9 reactivos distribuidos en 3 dimensiones, validados por juicio de expertos (V de Aiken > 0.80) y consistencia interna (Alfa de Cronbach > 0.80).
- Logs de ejecución en n8n y PostgreSQL: Registro automático de cada transacción para calcular la tasa de éxito y detectar fallos en las APIs externas.
- Apache JMeter: Utilizado para pruebas de carga y estrés, simulando usuarios concurrentes para verificar la estabilidad del sistema bajo demanda.

Proceso experimental
El proceso experimental definido comprende 5 fases, las cuales fueron:
- Fase 1 – Línea Base (Pre-Test): Medición de tiempos y aplicación del cuestionario de expectativas a una muestra de usuarios realizando la planificación de un viaje de forma manual (búsqueda en web).
- Fase 2 – Implementación y Despliegue: Configuración del entorno productivo de TravelSmart, asegurando la conexión estable entre Next.js, n8n y las APIs de terceros.
- Fase 3 – Ejecución de Pruebas (Post-Test): Los mismos usuarios interactuaron con el sistema TravelSmart para generar itinerarios bajo las mismas condiciones de la Fase 1. Se registraron tiempos automáticos y logs de éxito.
- Fase 4 – Recolección de Datos: Captura de respuestas del cuestionario de satisfacción post-uso y consolidación de métricas de tiempo y eficacia desde la base de datos.
- Fase 5 – Análisis y Validación: Procesamiento estadístico de los datos (Prueba T-Student para muestras relacionadas) para comparar los resultados del Pre-Test y Post-Test y validar las hipótesis de mejora.

3. Resultados
Los resultados obtenidos tras la fase experimental se presentan organizados según los objetivos específicos planteados.

3.1. Reducción del Tiempo de Planificación
Se compararon los tiempos promedios empleados por los usuarios (n=15) para planificar un viaje completo (destino, alojamiento y actividades) utilizando el método manual (búsqueda en múltiples webs) frente al uso de TravelSmart.
El tiempo promedio manual fue de 45 minutos (2700 segundos), mientras que con TravelSmart el tiempo promedio se redujo a 2 minutos (120 segundos). Esto representa una reducción del tiempo del 95.5%, superando el valor esperado del 80%. Esta drástica disminución se atribuye a la orquestación automatizada de consultas que elimina la necesidad de navegación y filtrado manual por parte del usuario.

3.2. Nivel de Satisfacción y Usabilidad
Tras utilizar el sistema, los usuarios completaron el cuestionario de satisfacción. Los resultados promedio por dimensión fueron:
- Claridad e Intuitividad: 4.6/5.0
- Eficiencia y Rendimiento: 4.8/5.0
- Fiabilidad y Confianza: 4.5/5.0
El promedio global de satisfacción fue de 4.63, situándose en el rango de "Totalmente de acuerdo" con la utilidad y facilidad de uso del sistema. Los usuarios destacaron especialmente la rapidez de respuesta y la pertinencia de las recomendaciones visuales.

3.3. Eficacia del Sistema (Task Completion Rate)
Durante las pruebas controladas, se registraron 50 intentos de generación de itinerarios. De estos, 48 resultaron en itinerarios completos y válidos presentados al usuario, mientras que 2 presentaron errores de timeout en la API externa de clima, los cuales fueron manejados por el sistema de fallbacks.
Esto arroja una Tasa de Finalización de Tareas del 96%, cumpliendo con el objetivo de eficacia (>90%) y demostrando la robustez de la arquitectura basada en n8n para manejar excepciones y garantizar la entrega de valor.

4. Discusión

5. Conclusiones

Referencias
Borràs, J., Moreno, A., & Valls, A. (2014). Intelligent tourism recommender systems: A survey. Expert Systems with Applications, 41(16), 7370–7389. https://doi.org/10.1016/j.eswa.2014.06.007 
Buhalis, D., & Law, R. (2008). Progress in information technology and tourism management: 20 years on and 10 years after the Internet—The state of eTourism research. Tourism Management, 29(4), 609–623. https://doi.org/10.1016/j.tourman.2008.01.005 
Calvaresi, D., Ibrahim, A., Calbimonte, J.-P., Schegg, R., Fragnière, E., & Schumacher, M. (2021). The evolution of chatbots in tourism: A systematic literature review. In Information and Communication Technologies in Tourism 2021 (pp. 3–16). Springer. https://doi.org/10.1007/978-3-030-65785-7_1 
Cerna, J. Y., Hernández-Peñaloza, G., Gaudiano, P., & Vargas, G. (2022). A systematic literature review for the Tourist Trip Design Problem. Journal of Industrial Information Integration, 26, 100253.
Chaudhari, K., & Thakkar, A. (2019). A comprehensive survey on travel recommender systems. Archives of Computational Methods in Engineering. https://doi.org/10.1007/s11831-019-09363-7
Gavalas, D., Konstantopoulos, C., Mastakas, K., & Pantziou, G. E. (2014). A survey on algorithmic approaches for solving tourist trip design problems. Journal of Heuristics, 20(3), 291–328. https://doi.org/10.1007/s10732-014-9242-5 
Ricci, F. (2022). Recommender systems in tourism. In Z. Xiang, M. Fuchs, U. Gretzel, & W. Höpken (Eds.), Handbook of e-Tourism. Springer. https://doi.org/10.1007/978-3-030-48652-5_26 
Souffriau, W., Vansteenwegen, P., Vanden Berghe, G., & Van Oudheusden, D. (2011). The planning of cycle trips in the province of East Flanders. Omega, 39(2), 209–213. https://doi.org/10.1016/j.omega.2010.05.001 
Vansteenwegen, P., Souffriau, W., & Van Oudheusden, D. (2011). The orienteering problem: A survey. European Journal of Operational Research, 209(1), 1–10. https://doi.org/10.1016/j.ejor.2010.03.045 
Werthner, H., & Ricci, F. (2004). Electronic commerce and tourism. Communications of the ACM, 47(12), 101–105. https://doi.org/10.1145/1035134.1035141 
Xiang, Z., & Fesenmaier, D. R. (2020). Travel information search. In Z. Xiang, M. Fuchs, U. Gretzel, & W. Höpken (Eds.), Handbook of e-Tourism. Springer. https://doi.org/10.1007/978-3-030-05324-6_55-1 
Xiang, Z., & Gretzel, U. (2010). Role of social media in online travel information search. Tourism Management, 31(2), 179–188. https://doi.org/10.1016/j.tourman.2009.02.016 
Xiang, Z., Magnini, V. P., & Fesenmaier, D. R. (2015). Information technology and consumer behavior in travel and tourism: Insights from travel planning using the Internet. Journal of Retailing and Consumer Services, 22, 244–249. https://doi.org/10.1016/j.jretconser.2014.08.005 
Yin, H., et al. (2015). Topic-based context-aware travel recommendation method exploiting geotagged photos and travel histories. Neurocomputing, 168, 539–555. https://doi.org/10.1016/j.neucom.2015.05.095 
Zanker, M., & Ricci, F. (2014). Recommending, contextualizing, and personalizing POIs. Information Technology & Tourism, 14(2), 105–107.*
Kurashima, T., Iwata, T., Irie, G., & Fujimura, K. (2013). Travel route recommendation using geotagged photos. Knowledge and Information Systems, 37(1), 37–60. https://doi.org/10.1007/s10115-012-0580-z 
Zhang, S., Yao, L., Sun, A., & Tay, Y. (2022). A comprehensive survey on trustworthy recommender systems. arXiv preprint arXiv:2209.10117.
